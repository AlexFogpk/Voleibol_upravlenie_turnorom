{% extends 'base.html' %}
{% block title %}Сетка{% endblock %}
{% block content %}
<h1>Сетка - {{ cat.label }}</h1>
<a class="btn btn-secondary mb-3" href="/{{ category }}/teams">Назад</a>
{% for round_index, round in enumerate(data.bracket) %}
<h2>Раунд {{ loop.index }}</h2>
<table class="table table-bordered">
<tr><th>Команда 1</th><th>Счет</th><th>Команда 2</th><th>Победитель</th></tr>
{% for match_index, match in enumerate(round) %}
<tr>
    <td>{{ match.team1.name if match.team1 else '-' }}</td>
    <td>
        {% if match.winner is none and match.team1 and match.team2 %}
        <form method="post" class="d-flex">
            <input type="hidden" name="round" value="{{ round_index }}">
            <input type="hidden" name="match" value="{{ match_index }}">
            <input class="form-control me-1" type="number" name="score1" required style="width:70px">
            <span class="me-1">:</span>
            <input class="form-control me-1" type="number" name="score2" required style="width:70px">
            <button class="btn btn-primary" type="submit">OK</button>
        </form>
        {% elif match.score1 is not none %}
            {{ match.score1 }} : {{ match.score2 }}
        {% else %}-{% endif %}
    </td>
    <td>{{ match.team2.name if match.team2 else '-' }}</td>
    <td>{{ match.winner.name if match.winner else '-' }}</td>
</tr>
{% endfor %}
</table>
{% endfor %}
{% endblock %}
